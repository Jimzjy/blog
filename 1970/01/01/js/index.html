<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS | Jimzjy</title>
    <meta name="description" content="

1.localstorage

    window.onstorage = (e) =&gt; {console.log(e)}
    // æˆ–è€…è¿™æ ·
    window.addEventListener(&#39;storage&#39;, (e) =&gt; console.log(e))

onstorageä»¥åŠstorageäº‹ä»¶ï¼Œé’ˆå¯¹éƒ½æ˜¯éå½“å‰é¡µé¢å¯¹localStorageè¿›è¡Œä¿®æ”¹æ—¶æ‰ä¼šè§¦å‘ ...">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.21a25359.css" as="style"><link rel="preload" href="/blog/assets/js/app.58155b05.js" as="script"><link rel="preload" href="/blog/assets/js/6.efbb1a0e.js" as="script"><link rel="preload" href="/blog/assets/js/4.9413832c.js" as="script"><link rel="preload" href="/blog/assets/js/18.4ca73e2f.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.e55fcec3.js"><link rel="prefetch" href="/blog/assets/js/10.51af10c9.js"><link rel="prefetch" href="/blog/assets/js/11.51ffef52.js"><link rel="prefetch" href="/blog/assets/js/12.0ff238b0.js"><link rel="prefetch" href="/blog/assets/js/13.7fcd5bb3.js"><link rel="prefetch" href="/blog/assets/js/14.375e841f.js"><link rel="prefetch" href="/blog/assets/js/15.83597c49.js"><link rel="prefetch" href="/blog/assets/js/16.5789d787.js"><link rel="prefetch" href="/blog/assets/js/17.57e46215.js"><link rel="prefetch" href="/blog/assets/js/19.5931c08e.js"><link rel="prefetch" href="/blog/assets/js/20.0d9cb551.js"><link rel="prefetch" href="/blog/assets/js/21.1dba83af.js"><link rel="prefetch" href="/blog/assets/js/22.98c6c60c.js"><link rel="prefetch" href="/blog/assets/js/23.1f8ed9ba.js"><link rel="prefetch" href="/blog/assets/js/24.ed98c08b.js"><link rel="prefetch" href="/blog/assets/js/25.61616923.js"><link rel="prefetch" href="/blog/assets/js/26.92ee0c25.js"><link rel="prefetch" href="/blog/assets/js/27.3c0fbdd5.js"><link rel="prefetch" href="/blog/assets/js/5.860e13d9.js"><link rel="prefetch" href="/blog/assets/js/7.b5dcbd12.js"><link rel="prefetch" href="/blog/assets/js/8.5c3b217f.js"><link rel="prefetch" href="/blog/assets/js/9.e865db1b.js"><link rel="prefetch" href="/blog/assets/js/vuejs-paginate.8d2cad8c.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.21a25359.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/blog/" class="nav-link home-link">Jimzjy </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/blog/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/blog/tag/memo/" class="nav-link">Memo</a></li><li class="nav-item"><a href="https://github.com/Jimzjy/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">GitHub</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/blog/" class="nav-link mobile-home-link">Jimzjy </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/blog/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/blog/tag/memo/" class="nav-link">Memo</a></li><li class="mobile-nav-item"><a href="https://github.com/Jimzjy/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">GitHub</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        JS
      </h1> <div class="post-meta"><!----> <!----> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-d832e844><a href="/blog/tag/memo" data-v-d832e844> memo </a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h3 id="å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´é€šä¿¡çš„å‡ ç§æ–¹æ³•"><a href="#å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´é€šä¿¡çš„å‡ ç§æ–¹æ³•" class="header-anchor">#</a> å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´é€šä¿¡çš„å‡ ç§æ–¹æ³•</h3> <p><strong>1.localstorage</strong></p> <div class="language- extra-class"><pre><code>window.onstorage = (e) =&gt; {console.log(e)}
// æˆ–è€…è¿™æ ·
window.addEventListener('storage', (e) =&gt; console.log(e))
</code></pre></div><p>onstorageä»¥åŠstorageäº‹ä»¶ï¼Œé’ˆå¯¹éƒ½æ˜¯<strong>éå½“å‰é¡µé¢</strong>å¯¹localStorageè¿›è¡Œä¿®æ”¹æ—¶æ‰ä¼šè§¦å‘ï¼Œå½“å‰é¡µé¢ä¿®æ”¹localStorageä¸ä¼šè§¦å‘ç›‘å¬å‡½æ•°ã€‚ç„¶åå°±æ˜¯åœ¨å¯¹åŸæœ‰çš„æ•°æ®çš„å€¼è¿›è¡Œä¿®æ”¹æ—¶æ‰ä¼šè§¦å‘ï¼Œæ¯”å¦‚åŸæœ¬å·²ç»æœ‰ä¸€ä¸ªkeyä¼šaå€¼ä¸ºbçš„localStorageï¼Œä½ å†æ‰§è¡Œï¼š<code>localStorage.setItem('a', 'b')</code>ä»£ç ï¼ŒåŒæ ·æ˜¯ä¸ä¼šè§¦å‘ç›‘å¬å‡½æ•°çš„.</p> <p><strong>2.webworker</strong></p> <p>æ™®é€šçš„webworkerç›´æ¥ä½¿ç”¨new Worker()å³å¯åˆ›å»ºï¼Œè¿™ç§webworkeræ˜¯å½“å‰é¡µé¢ä¸“æœ‰çš„ã€‚ç„¶åè¿˜æœ‰ç§å…±äº«worker(SharedWorker)ï¼Œè¿™ç§æ˜¯å¯ä»¥å¤šä¸ªæ ‡ç­¾é¡µã€iframeå…±åŒä½¿ç”¨çš„.</p> <p><strong>SharedWorker</strong></p> <p>SharedWorkerå¯ä»¥è¢«å¤šä¸ªwindowå…±åŒä½¿ç”¨ï¼Œä½†å¿…é¡»ä¿è¯è¿™äº›æ ‡ç­¾é¡µéƒ½æ˜¯åŒæºçš„(ç›¸åŒçš„åè®®ï¼Œä¸»æœºå’Œç«¯å£å·)</p> <p>æ–°å»ºä¸€ä¸ªjsæ–‡ä»¶worker.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// sharedWorkeræ‰€è¦ç”¨åˆ°çš„jsæ–‡ä»¶ï¼Œä¸å¿…æ‰“åŒ…åˆ°é¡¹ç›®ä¸­ï¼Œç›´æ¥æ”¾åˆ°æœåŠ¡å™¨å³å¯</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string">''</span>
<span class="token function-variable function">onconnect</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> port <span class="token operator">=</span> e<span class="token punctuation">.</span>ports<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

  port<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">'get'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      port<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      data <span class="token operator">=</span> e<span class="token punctuation">.</span>data
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>webworkerç«¯(æš‚ä¸”è¿™æ ·ç§°å‘¼)çš„ä»£ç å°±å¦‚ä¸Šï¼Œåªéœ€æ³¨å†Œä¸€ä¸ªonmessageç›‘å¬ä¿¡æ¯çš„äº‹ä»¶ï¼Œå®¢æˆ·ç«¯(å³ä½¿ç”¨sharedWorkerçš„æ ‡ç­¾é¡µ)å‘é€messageæ—¶å°±ä¼šè§¦å‘.</p> <p>æ³¨æ„webworkeræ— æ³•åœ¨æœ¬åœ°ä½¿ç”¨, worker.jså’Œindex.htmlåœ¨åŒä¸€ç›®å½•.</p> <p>index.html</p> <div class="language- extra-class"><pre><code>// è¿™æ®µä»£ç æ˜¯å¿…é¡»çš„ï¼Œæ‰“å¼€é¡µé¢åæ³¨å†ŒSharedWorkerï¼Œæ˜¾ç¤ºæŒ‡å®šworker.port.start()æ–¹æ³•å»ºç«‹ä¸workeré—´çš„è¿æ¥
    if (typeof Worker === &quot;undefined&quot;) {
      alert('å½“å‰æµè§ˆå™¨ä¸æ”¯æŒwebworker')
    } else {
      let worker = new SharedWorker('worker.js')
      worker.port.addEventListener('message', (e) =&gt; {
        console.log('æ¥è‡ªworkerçš„æ•°æ®ï¼š', e.data)
      }, false)
      worker.port.start()
      window.worker = worker
    }
// è·å–å’Œå‘é€æ¶ˆæ¯éƒ½æ˜¯è°ƒç”¨postMessageæ–¹æ³•ï¼Œæˆ‘è¿™é‡Œçº¦å®šçš„æ˜¯ä¼ é€’'get'è¡¨ç¤ºè·å–æ•°æ®ã€‚
window.worker.port.postMessage('get')
window.worker.port.postMessage('å‘é€ä¿¡æ¯ç»™worker')
</code></pre></div><h3 id="åŸå‹"><a href="#åŸå‹" class="header-anchor">#</a> åŸå‹</h3> <img src="/blog/js/proto.png"> <ul><li><code>Object</code>Â æ˜¯æ‰€æœ‰å¯¹è±¡çš„çˆ¸çˆ¸ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡Â <code>__proto__</code>Â æ‰¾åˆ°å®ƒ</li> <li><code>Function</code>Â æ˜¯æ‰€æœ‰å‡½æ•°çš„çˆ¸çˆ¸ï¼Œæ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥é€šè¿‡Â <code>__proto__</code>Â æ‰¾åˆ°å®ƒ</li> <li><code>Function.prototype</code>Â å’ŒÂ <code>Object.prototype</code>Â æ˜¯ä¸¤ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œä»–ä»¬ç”±å¼•æ“æ¥åˆ›å»º</li> <li>é™¤äº†ä»¥ä¸Šä¸¤ä¸ªç‰¹æ®Šå¯¹è±¡ï¼Œå…¶ä»–å¯¹è±¡éƒ½æ˜¯é€šè¿‡æ„é€ å™¨Â <code>new</code>Â å‡ºæ¥çš„</li> <li>å‡½æ•°çš„Â <code>prototype</code>Â æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åŸå‹</li> <li>å¯¹è±¡çš„Â <code>__proto__</code>Â æŒ‡å‘åŸå‹ï¼ŒÂ <code>__proto__</code>Â å°†å¯¹è±¡å’ŒåŸå‹è¿æ¥èµ·æ¥ç»„æˆäº†åŸå‹é“¾</li></ul> <p>å…ˆæœ‰çš„ Function.prototype å†æœ‰çš„ function Function , ä¸åƒ Foo , æ˜¯å…ˆæœ‰çš„ function Foo å†æœ‰çš„ Foo.prototype, æ‰€ä»¥ Function.<strong>proto</strong> === Function.prototype, è¿™æ˜¯å¼•æ“ä½œå‡ºçš„æ“ä½œ.</p> <p>bind() ç”Ÿæˆçš„æ²¡æœ‰ prototype (æ‰€ä»¥ä¸ä¼šå½±å“åŸæ¥çš„ function), new å®ƒä»¬çš„æ—¶å€™, ä¼šè°ƒç”¨åŸæ„é€ å‡½æ•°, å°†åŸæ„é€ å‡½æ•°çš„ prototype èµ‹ç»™ å¯¹è±¡çš„ <strong>proto</strong> .</p> <h3 id="prototypeä½œç”¨"><a href="#prototypeä½œç”¨" class="header-anchor">#</a> prototypeä½œç”¨</h3> <ul><li>è®©å®ä¾‹å¯¹è±¡çŸ¥é“æ˜¯ä»€ä¹ˆå‡½æ•°æ„é€ äº†å®ƒ</li> <li>å¦‚æœæƒ³ç»™æŸäº›ç±»åº“ä¸­çš„æ„é€ å‡½æ•°å¢åŠ ä¸€äº›è‡ªå®šä¹‰çš„æ–¹æ³•ï¼Œå°±å¯ä»¥é€šè¿‡Â <code>xx.constructor.method</code>Â æ¥æ‰©å±•</li></ul> <h3 id="newçš„è¿‡ç¨‹"><a href="#newçš„è¿‡ç¨‹" class="header-anchor">#</a> newçš„è¿‡ç¨‹</h3> <ul><li><p>step1ï¼šé¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°†ä¼šä½œä¸ºæ‰§è¡Œ new æ„é€ å‡½æ•°() ä¹‹åï¼Œè¿”å›çš„å¯¹è±¡å®ä¾‹</p></li> <li><p>step2ï¼šå°†ä¸Šé¢åˆ›å»ºçš„ç©ºå¯¹è±¡çš„åŸå‹ï¼ˆ<code>__proto__</code>ï¼‰ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„ prototype å±æ€§</p></li> <li><p>step3ï¼šå°†è¿™ä¸ªç©ºå¯¹è±¡èµ‹å€¼ç»™æ„é€ å‡½æ•°å†…éƒ¨çš„ thisï¼Œå¹¶æ‰§è¡Œæ„é€ å‡½æ•°é€»è¾‘</p></li> <li><p>step4ï¼šæ ¹æ®æ„é€ å‡½æ•°æ‰§è¡Œé€»è¾‘ï¼Œè¿”å›ç¬¬ä¸€æ­¥åˆ›å»ºçš„å¯¹è±¡æˆ–è€…æ„é€ å‡½æ•°çš„æ˜¾å¼è¿”å›å€¼</p> <p>function newFunc(...args) {
// å–å‡º args æ•°ç»„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³ç›®æ ‡æ„é€ å‡½æ•°
const constructor = args.shift()</p> <p>// åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä¸”è¿™ä¸ªç©ºå¯¹è±¡ç»§æ‰¿æ„é€ å‡½æ•°çš„ prototype å±æ€§
// å³å®ç° obj.<strong>proto</strong> === constructor.prototype
const obj = Object.create(constructor.prototype)</p> <p>// æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œå¾—åˆ°æ„é€ å‡½æ•°è¿”å›ç»“æœ
// æ³¨æ„è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ applyï¼Œå°†æ„é€ å‡½æ•°å†…çš„ this æŒ‡å‘ä¸º obj
const result = constructor.apply(obj, args)</p> <p>// å¦‚æœé€ å‡½æ•°æ‰§è¡Œåï¼Œè¿”å›ç»“æœæ˜¯å¯¹è±¡ç±»å‹ï¼Œå°±ç›´æ¥è¿”å›ï¼Œå¦åˆ™è¿”å› obj å¯¹è±¡
return (typeof result === 'object' &amp;&amp; result != null) ? result : obj
}</p></li></ul> <h3 id="this"><a href="#this" class="header-anchor">#</a> this</h3> <p><strong>this çš„æŒ‡å‘ï¼Œæ˜¯åœ¨è°ƒç”¨å‡½æ•°æ—¶æ ¹æ®æ‰§è¡Œä¸Šä¸‹æ–‡æ‰€åŠ¨æ€ç¡®å®šçš„</strong></p> <ul><li>åœ¨å‡½æ•°ä½“ä¸­ï¼Œç®€å•è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼ˆéæ˜¾å¼/éšå¼ç»‘å®šä¸‹ï¼‰ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹Â <code>this</code>Â ç»‘å®šåˆ°Â <code>undefined</code>ï¼Œå¦åˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡Â <code>window</code>ï¼<code>global</code>ï¼›</li> <li>ä¸€èˆ¬æ„é€ å‡½æ•°Â <code>new</code>Â è°ƒç”¨ï¼Œç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ä¸Šï¼›</li> <li>ä¸€èˆ¬ç”±Â <code>call</code>/<code>apply</code>/<code>bind</code>Â æ–¹æ³•æ˜¾å¼è°ƒç”¨ï¼Œç»‘å®šåˆ°æŒ‡å®šå‚æ•°çš„å¯¹è±¡ä¸Šï¼›</li> <li>ä¸€èˆ¬ç”±ä¸Šä¸‹æ–‡å¯¹è±¡è°ƒç”¨ï¼Œç»‘å®šåœ¨è¯¥å¯¹è±¡ä¸Šï¼›</li> <li>ç®­å¤´å‡½æ•°ä¸­ï¼Œæ ¹æ®å¤–å±‚ä¸Šä¸‹æ–‡ç»‘å®šçš„Â <code>this</code>Â å†³å®šÂ <code>this</code>Â æŒ‡å‘ã€‚</li></ul> <h3 id="javascript-æ‰§è¡Œ"><a href="#javascript-æ‰§è¡Œ" class="header-anchor">#</a> JavaScript æ‰§è¡Œ</h3> <ul><li>ä»£ç é¢„ç¼–è¯‘é˜¶æ®µ</li> <li>ä»£ç æ‰§è¡Œé˜¶æ®µ</li></ul> <p>é¢„ç¼–è¯‘é˜¶æ®µæ˜¯å‰ç½®é˜¶æ®µï¼Œè¿™ä¸ªæ—¶å€™ç”±ç¼–è¯‘å™¨å°† JavaScript ä»£ç ç¼–è¯‘æˆå¯æ‰§è¡Œçš„ä»£ç ã€‚ æ³¨æ„ï¼Œè¿™é‡Œçš„é¢„ç¼–è¯‘å’Œä¼ ç»Ÿçš„ç¼–è¯‘å¹¶ä¸ä¸€æ ·ï¼Œä¼ ç»Ÿçš„ç¼–è¯‘éå¸¸å¤æ‚ï¼Œæ¶‰åŠåˆ†è¯ã€è§£æã€ä»£ç ç”Ÿæˆç­‰è¿‡ç¨‹ ã€‚è¿™é‡Œçš„é¢„ç¼–è¯‘æ˜¯ JavaScript ä¸­ç‹¬ç‰¹çš„æ¦‚å¿µï¼Œè™½ç„¶ JavaScript æ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œç¼–è¯‘ä¸€è¡Œï¼Œæ‰§è¡Œä¸€è¡Œã€‚ä½†æ˜¯åœ¨ä»£ç æ‰§è¡Œå‰ï¼ŒJavaScript å¼•æ“ç¡®å®ä¼šåšä¸€äº›ã€Œé¢„å…ˆå‡†å¤‡å·¥ä½œã€</p> <p><strong>æ‰§è¡Œé˜¶æ®µä¸»è¦ä»»åŠ¡æ˜¯æ‰§è¡Œä»£ç ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡åœ¨è¿™ä¸ªé˜¶æ®µå…¨éƒ¨åˆ›å»ºå®Œæˆ</strong></p> <p>JavaScript ä»£ç åœ¨é¢„ç¼–è¯‘é˜¶æ®µå¯¹å˜é‡çš„å†…å­˜ç©ºé—´è¿›è¡Œåˆ†é…ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰çš„å˜é‡æå‡è¿‡ç¨‹ä¾¿æ˜¯åœ¨æ­¤é˜¶æ®µå®Œæˆçš„</p> <ul><li><p>é¢„ç¼–è¯‘é˜¶æ®µè¿›è¡Œå˜é‡å£°æ˜ï¼›</p></li> <li><p>é¢„ç¼–è¯‘é˜¶æ®µå˜é‡å£°æ˜è¿›è¡Œæå‡ï¼Œä½†æ˜¯å€¼ä¸º undefinedï¼›</p></li> <li><p>é¢„ç¼–è¯‘é˜¶æ®µæ‰€æœ‰éè¡¨è¾¾å¼çš„å‡½æ•°å£°æ˜è¿›è¡Œæå‡ã€‚</p> <p>function bar() {
console.log('bar1')
}</p> <p>var bar = function () {
console.log('bar2')
}</p> <p>bar()</p> <p>// è¾“å‡ºï¼šbar2ï¼Œæˆ‘ä»¬è°ƒæ¢é¡ºåºï¼š</p> <p>var bar = function () {
console.log('bar2')
}</p> <p>function bar() {
console.log('bar1')
}</p> <p>bar()
// ä»ç„¶è¾“å‡ºï¼šbar2</p> <p>foo(10)
function foo (num) {
console.log(foo)
foo = num;<br>
console.log(foo)
var foo
}
console.log(foo)
foo = 1
console.log(foo)</p> <p>è¾“å‡ºï¼š</p> <p>undefined
10
Æ’ foo (num) {
console.log(foo)
foo = num<br>
console.log(foo)
var foo
}
1</p></li></ul> <p>ä½œç”¨åŸŸåœ¨é¢„ç¼–è¯‘é˜¶æ®µç¡®å®šï¼Œä½†æ˜¯ä½œç”¨åŸŸé“¾æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»ºé˜¶æ®µå®Œå…¨ç”Ÿæˆçš„ã€‚å› ä¸ºå‡½æ•°åœ¨è°ƒç”¨æ—¶ï¼Œæ‰ä¼šå¼€å§‹åˆ›å»ºå¯¹åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p> <p><strong>æ‰§è¡Œä¸Šä¸‹æ–‡</strong>åŒ…æ‹¬äº†ï¼šå˜é‡å¯¹è±¡ã€ä½œç”¨åŸŸé“¾ä»¥åŠ this çš„æŒ‡å‘</p> <p>å˜é‡æå‡æ˜¯å‘ç”Ÿåœ¨é¢„ç¼–è¯‘é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»ºé˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µå°±æ˜¯ï¼šåˆ›å»ºå˜é‡å¯¹è±¡ï¼Œåˆ›å»ºä½œç”¨åŸŸé“¾ï¼Œç¡®å®šthisæŒ‡å‘ï¼Œletå’Œconstçš„å˜é‡æ˜¯åœ¨æ‰§è¡Œé˜¶æ®µå¼€å§‹æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æ²¡æœ‰åœ¨é¢„ç¼–è¯‘é˜¶æ®µæ‰§è¡Œï¼Œå°±æ˜¯æ²¡æœ‰æå‡.<br>
JavaScriptå¼•æ“åœ¨æ‰«æä»£ç æ—¶ï¼Œä¹Ÿå°±æ˜¯é¢„ç¼–è¯‘é˜¶æ®µï¼Œå¯¹äºå‘ç°çš„å˜é‡å£°æ˜ï¼Œè¦ä¹ˆå°†å®ƒä»¬æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œä¹Ÿå°±æ˜¯varå£°æ˜çš„ï¼Œè¦ä¹ˆå°†å£°æ˜æ”¾åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œä¹Ÿå°±æ˜¯letå’Œconstï¼Œåœ¨æ‰§è¡Œé˜¶æ®µæ—¶ï¼Œæ‰§è¡Œåˆ°å£°æ˜è¯­å¥åï¼Œæ‰ä¼šä»æš‚æ—¶æ€§æ­»åŒºç§»é™¤.</p> <h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="header-anchor">#</a> é—­åŒ…</h3> <p>é—­åŒ…ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¹Ÿæ˜¯å®šä¹‰åœ¨å…¨å±€é‡Œçš„ï¼Œåªæ˜¯å®ƒçš„å®šä¹‰æ—¶é—´æ˜¯ä¾èµ–å®ƒçš„åŒ…å«å‡½æ•°çš„ï¼Œä¹‹æ‰€ä»¥é—­åŒ…èƒ½è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œæ˜¯å› ä¸ºå¤–éƒ¨å‡½æ•°å†…çš„ä»£ç æ‰§è¡Œï¼Œæ‰§è¡Œåˆ°å®ƒï¼Œå®ƒè¢«å®šä¹‰æ—¶ï¼Œå®ƒæŠŠå¤–éƒ¨å‡½æ•°çš„å˜é‡å¯¹è±¡ä¿å­˜åœ¨äº†è‡ªå·±çš„<code>[[scope]]</code>å±æ€§ä¸Š.<br>
è¿™ä¸ªå†…éƒ¨å‡½æ•°è¢«è¿”å›ï¼Œç„¶åæ‰§è¡Œæ—¶ï¼Œç¬¬ä¸€åˆ›å»ºè‡ªå·±çš„æ‰§è¡Œç¯å¢ƒï¼Œç„¶åæŠŠ<code>[[scope]]</code>é‡Œä¿å­˜çš„ä½œç”¨åŸŸå¤åˆ¶è¿‡æ¥ï¼ŒæŠŠè‡ªå·±çš„å˜é‡å¯¹è±¡æ”¾åœ¨æœ€å‰ç«¯ï¼Œå»ºç«‹è‡ªå·±çš„ä½œç”¨åŸŸé“¾ï¼Œæ‰€ä»¥å®ƒä¾ç„¶å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œæ‰€ä»¥æ— è®ºé—­åŒ…è¿˜æ˜¯è¯æ³•ç¯å¢ƒï¼Œæœç´¢å˜é‡çš„è¿‡ç¨‹éƒ½æ˜¯åœ¨ä½œç”¨åŸŸé“¾ä¸Šæœç´¢.<br>
è‡³äºå®ƒèƒ½æœç´¢åˆ°å“ªäº›å˜é‡ï¼Œå–å†³äºå®ƒæ‰€åœ¨çš„æ‰§è¡Œç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯this.</p> <h3 id="å†…å­˜ç®¡ç†åŸºæœ¬æ¦‚å¿µ"><a href="#å†…å­˜ç®¡ç†åŸºæœ¬æ¦‚å¿µ" class="header-anchor">#</a> å†…å­˜ç®¡ç†åŸºæœ¬æ¦‚å¿µ</h3> <ul><li>æ ˆç©ºé—´ï¼šç”±æ“ä½œç³»ç»Ÿè‡ªåŠ¨åˆ†é…é‡Šæ”¾ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ï¼Œå…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­çš„æ ˆã€‚</li> <li>å †ç©ºé—´ï¼šä¸€èˆ¬ç”±å¼€å‘è€…åˆ†é…é‡Šæ”¾ï¼Œè¿™éƒ¨åˆ†ç©ºé—´å°±è¦è€ƒè™‘åƒåœ¾å›æ”¶çš„é—®é¢˜ã€‚</li></ul> <p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹ä¿å­˜åœ¨æ ˆå†…å­˜å½“ä¸­ï¼Œå¼•ç”¨ç±»å‹ä¿å­˜åœ¨å †å†…å­˜å½“ä¸­</p> <h3 id="bind"><a href="#bind" class="header-anchor">#</a> bind</h3> <div class="language- extra-class"><pre><code>Function.prototype.bind = Function.prototype.bind || function (context) {
   var me = this;
   var args = Array.prototype.slice.call(arguments, 1);
   var F = function () {}; // ä¸ºäº†ä¸å½±å“åŸæ¥çš„ prototype
   F.prototype = this.prototype;
   var bound = function () {
       var innerArgs = Array.prototype.slice.call(arguments);
       var finalArgs = args.concat(innerArgs);
       return me.apply(this instanceof F ? this : context || this, finalArgs);
   }
   bound.prototype = new F();
   return bound;
}
</code></pre></div><h3 id="apply"><a href="#apply" class="header-anchor">#</a> apply</h3> <div class="language- extra-class"><pre><code>Function.prototype.applyFn = function (targetObject, argsArray) {
   if(typeof argsArray === 'undefined' || argsArray === null) {
       argsArray = []
   }

   if(typeof targetObject === 'undefined' || targetObject === null){
       targetObject = window
   }

   targetObject = new Object(targetObject)

   const targetFnKey = 'targetFnKey'
   targetObject[targetFnKey] = this

   const result = targetObject[targetFnKey](...argsArray)
   delete targetObject[targetFnKey]
   return result
}
</code></pre></div><h3 id="reduce"><a href="#reduce" class="header-anchor">#</a> reduce</h3> <div class="language- extra-class"><pre><code>Array.prototype.reduce = Array.prototype.reduce || function(func, initialValue) {
   var arr = this
   var base = typeof initialValue === 'undefined' ? arr[0] : initialValue
   var startPoint = typeof initialValue === 'undefined' ? 1 : 0
   arr.slice(startPoint)
       .forEach(function(val, index) {
           base = func(base, val, index + startPoint, arr)
       })
   return base
}
</code></pre></div><h3 id="javascript-ç±»å‹"><a href="#javascript-ç±»å‹" class="header-anchor">#</a> JavaScript ç±»å‹</h3> <ul><li>null</li> <li>undefined</li> <li>boolean</li> <li>number</li> <li>string</li> <li>object</li> <li>symbol</li> <li>bigint</li></ul> <p>object ç±»å‹åˆå…·ä½“åŒ…å«äº† functionã€arrayã€date ç­‰ã€‚</p> <p><strong>ä½¿ç”¨ typeof åˆ¤æ–­ç±»å‹</strong></p> <p>ä½¿ç”¨ typeof å¯ä»¥å‡†ç¡®åˆ¤æ–­å‡ºé™¤ null ä»¥å¤–çš„åŸºæœ¬ç±»å‹ï¼Œä»¥åŠ function ç±»å‹ã€symbol ç±»å‹ï¼›null ä¼šè¢« typeof åˆ¤æ–­ä¸º object, bigint ä¸º bigintã€‚</p> <div class="language- extra-class"><pre><code>const foo = () =&gt; 1
typeof foo // &quot;function&quot;
</code></pre></div><p><strong>ä½¿ç”¨ instanceof åˆ¤æ–­ç±»å‹</strong></p> <p>ä½¿ç”¨ a instanceof B åˆ¤æ–­çš„æ˜¯ï¼ša æ˜¯å¦ä¸º B çš„å®ä¾‹ï¼Œå³ a çš„åŸå‹é“¾ä¸Šæ˜¯å¦å­˜åœ¨ B æ„é€ å‡½æ•°</p> <p><strong>ä½¿ç”¨ constructor å’Œ Object.prototype.toString åˆ¤æ–­ç±»å‹</strong></p> <div class="language- extra-class"><pre><code>console.log(Object.prototype.toString.call(1))
// [object Number]
</code></pre></div><h3 id="è½¬æ¢"><a href="#è½¬æ¢" class="header-anchor">#</a> <strong>è½¬æ¢</strong></h3> <p>å½“ä½¿ç”¨ + è¿ç®—ç¬¦è®¡ç®— string å’Œå…¶ä»–ç±»å‹ç›¸åŠ æ—¶ï¼Œéƒ½ä¼šè½¬æ¢ä¸º string ç±»å‹ï¼›å…¶ä»–æƒ…å†µï¼Œéƒ½ä¼šè½¬æ¢ä¸º number ç±»å‹ï¼Œä½†æ˜¯ undefined ä¼šè½¬æ¢ä¸º NaNï¼Œç›¸åŠ ç»“æœä¹Ÿæ˜¯ NaN</p> <p><strong>å¤æ‚ç±»å‹</strong></p> <p>å½“ä½¿ç”¨ + è¿ç®—ç¬¦è®¡ç®—æ—¶ï¼Œå¦‚æœå­˜åœ¨å¤æ‚ç±»å‹ï¼Œé‚£ä¹ˆå¤æ‚ç±»å‹å°†ä¼šè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹ï¼Œå†è¿›è¡Œè¿ç®—.</p> <p>å¯¹è±¡åœ¨è½¬æ¢åŸºæœ¬ç±»å‹æ—¶ï¼Œä¼šè°ƒç”¨è¯¥å¯¹è±¡ä¸Š valueOf æˆ– toString è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹çš„ç»“æœ.</p> <p>é‚£å…·ä½“è°ƒç”¨ valueOf è¿˜æ˜¯ toString å‘¢ï¼Ÿè¿™æ˜¯ ES è§„èŒƒæ‰€å†³å®šçš„ï¼Œå®é™…ä¸Šè¿™å–å†³äºå†…ç½®çš„ toPrimitive è°ƒç”¨ç»“æœ.</p> <div class="language- extra-class"><pre><code>const object1 = {
  [Symbol.toPrimitive](hint) {
    if (hint == 'number') {
			// The hint argument can be one of &quot;number&quot;, &quot;string&quot;, and &quot;default&quot;.
      return 42;
    }
    return null;
  }
};

console.log(+object1);
// expected output: 42
</code></pre></div><h3 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h3> <div class="language- extra-class"><pre><code>function Promise(executor) {
 this.status = 'pending'
 this.value = null
 this.reason = null
 this.onFulfilledArray = []
 this.onRejectedArray = []

 const resolve = value =&gt; {
   if (value instanceof Promise) {
     return value.then(resolve, reject)
   }
   setTimeout(() =&gt; {
     if (this.status === 'pending') {
       this.value = value
       this.status = 'fulfilled'

       this.onFulfilledArray.forEach(func =&gt; {
         func(value)
       })
     }
   })
 }

 const reject = reason =&gt; {
   setTimeout(() =&gt; {
     if (this.status === 'pending') {
       this.reason = reason
       this.status = 'rejected'

       this.onRejectedArray.forEach(func =&gt; {
         func(reason)
       })
     }
   })
 }


   try {
       executor(resolve, reject)
   } catch(e) {
       reject(e)
   }
}

const resolvePromise = (promise2, result, resolve, reject) =&gt; {
 // å½“ result å’Œ promise2 ç›¸ç­‰æ—¶ï¼Œä¹Ÿå°±æ˜¯è¯´ onfulfilled è¿”å› promise2 æ—¶ï¼Œè¿›è¡Œ reject
 if (result === promise2) {
   return reject(new TypeError('error due to circular reference'))
 }

 // æ˜¯å¦å·²ç»æ‰§è¡Œè¿‡ onfulfilled æˆ–è€… onrejected
 let consumed = false
 let thenable

 if (result instanceof Promise) {
   if (result.status === 'pending') {
     result.then(function(data) {
       resolvePromise(promise2, data, resolve, reject)
     }, reject)
   } else {
     result.then(resolve, reject)
   }
   return
 }

 let isComplexResult = target =&gt; (typeof target === 'function' || typeof target === 'object') &amp;&amp; (target !== null)
 // å¦‚æœè¿”å›çš„æ˜¯ç–‘ä¼¼ Promise ç±»å‹
 if (isComplexResult(result)) {
   try {
     thenable = result.then
     // å¦‚æœè¿”å›çš„æ˜¯ Promise ç±»å‹ï¼Œå…·æœ‰ then æ–¹æ³•
     if (typeof thenable === 'function') {
       thenable.call(result, function(data) {
         if (consumed) {
           return
         }
         consumed = true

         return resolvePromise(promise2, data, resolve, reject)
       }, function(error) {
         if (consumed) {
           return
         }
         consumed = true

         return reject(error)
       })
     }
     else {
       return resolve(result)
     }

   } catch(e) {
     if (consumed) {
       return
     }
     consumed = true
     return reject(e)
   }
 }
 else {
   return resolve(result)
 }
}

Promise.prototype.then = function(onfulfilled, onrejected) {
 onfulfilled = typeof onfulfilled === 'function' ? onfulfilled : data =&gt; data
 onrejected = typeof onrejected === 'function' ? onrejected : error =&gt; {throw error}

 // promise2 å°†ä½œä¸º then æ–¹æ³•çš„è¿”å›å€¼
 let promise2

 if (this.status === 'fulfilled') {
   return promise2 = new Promise((resolve, reject) =&gt; {
     setTimeout(() =&gt; {
       try {
         // è¿™ä¸ªæ–°çš„ promise2 resolved çš„å€¼ä¸º onfulfilled çš„æ‰§è¡Œç»“æœ
         let result = onfulfilled(this.value)
         resolvePromise(promise2, result, resolve, reject)
       }
       catch(e) {
         reject(e)
       }
     })
   })
 }
 if (this.status === 'rejected') {
   return promise2 = new Promise((resolve, reject) =&gt; {
     setTimeout(() =&gt; {
       try {
         // è¿™ä¸ªæ–°çš„ promise2 reject çš„å€¼ä¸º onrejected çš„æ‰§è¡Œç»“æœ
        let result = onrejected(this.reason)
        resolvePromise(promise2, result, resolve, reject)
       }
       catch(e) {
         reject(e)
       }
     })
   })
 }
 if (this.status === 'pending') {
   return promise2 = new Promise((resolve, reject) =&gt; {
     this.onFulfilledArray.push(value =&gt; {
       try {
         let result = onfulfilled(value)
         resolvePromise(promise2, result, resolve, reject)
       }
       catch(e) {
         return reject(e)
       }
     })

     this.onRejectedArray.push(reason =&gt; {
       try {
         let result = onrejected(reason)
         resolvePromise(promise2, result, resolve, reject)
       }
       catch(e) {
         return reject(e)
       }
     })      
   })
 }
}

Promise.prototype.catch = function(catchFunc) {
 return this.then(null, catchFunc)
}

Promise.resolve = function(value) {
 return new Promise((resolve, reject) =&gt; {
   resolve(value)
 })
}

Promise.reject = function(value) {
 return new Promise((resolve, reject) =&gt; {
   reject(value)
 })
}

Promise.race = function(promiseArray) {
 if (!Array.isArray(promiseArray)) {
     throw new TypeError('The arguments should be an array!')
 }
 return new Promise((resolve, reject) =&gt; {
   try {
     const length = promiseArray.length
     for (let i = 0; i        promiseArray[i].then(resolve, reject)
     }
   }
   catch(e) {
     reject(e)
   }
 })
}

Promise.all = function (promiseArray) {
  if (!Array.isArray(promiseArray)) {
    throw new TypeError('The arguments should be an array!')
  }
  return new Promise((resolve, reject) =&gt; {
    try {
      let resultArray = []
      let count = 0
      const length = promiseArray.length

      for (let i = 0; i &lt; promiseArray.length; i++) {
        promiseArray[i].then(data =&gt; {
          resultArray[i] = data
          count++

          if (count === length) {
            resolve(resultArray)
          }
        }, reject)
      }
    }
    catch (e) {
      reject(e)
    }
  })
}
</code></pre></div><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="header-anchor">#</a> ç»§æ‰¿</h3> <div class="language- extra-class"><pre><code>function inherit(Child, Parent) {
    // ç»§æ‰¿åŸå‹ä¸Šçš„å±æ€§
   Child.prototype = Object.create(Parent.prototype)

    // ä¿®å¤ constructor
   Child.prototype.constructor = Child

   // å­˜å‚¨è¶…ç±»
   Child.super = Parent

   // é™æ€å±æ€§ç»§æ‰¿
   if (Object.setPrototypeOf) {
       // setPrototypeOf es6
       Object.setPrototypeOf(Child, Parent)
   } else if (Child.__proto__) {
       // __proto__ es6 å¼•å…¥ï¼Œä½†æ˜¯éƒ¨åˆ†æµè§ˆå™¨æ—©å·²æ”¯æŒ
       Child.__proto__ = Parent
   } else {
       // å…¼å®¹ IE10 ç­‰é™ˆæ—§æµè§ˆå™¨
       // å°† Parent ä¸Šçš„é™æ€å±æ€§å’Œæ–¹æ³•æ‹·è´ä¸€ä»½åˆ° Child ä¸Šï¼Œä¸ä¼šè¦†ç›– Child ä¸Šçš„æ–¹æ³•
       for (var k in Parent) {
           if (Parent.hasOwnProperty(k) &amp;&amp; !(k in Child)) {
               Child[k] = Parent[k]
           }
       }
   }

}
</code></pre></div><p>JavaScript çš„æ—¥æœŸå¯¹è±¡åªèƒ½é€šè¿‡ JavaScript Date ä½œä¸ºæ„é€ å‡½æ•°æ¥å®ä¾‹åŒ–å¾—åˆ°ã€‚</p> <p><strong>Dateç»§æ‰¿</strong></p> <div class="language- extra-class"><pre><code>function DateConstructor() {
   var dateObj = new(Function.prototype.bind.apply(Date, [Date].concat(Array.prototype.slice.call(arguments))))()

   Object.setPrototypeOf(dateObj, DateConstructor.prototype)

   dateObj.foo = 'bar'

   return dateObj
}

Object.setPrototypeOf(DateConstructor.prototype, Date.prototype)

DateConstructor.prototype.getMyTime = function getTime() {
   return this.getTime()
}

let date = new DateConstructor()

console.log(date.getMyTime())
</code></pre></div><p>æ•´ä¸ªå®ç°è¿‡ç¨‹é€šè¿‡æ›´æ”¹åŸå‹å…³ç³»ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œè°ƒç”¨åŸç”Ÿæ„é€ å‡½æ•° Dateï¼Œå¹¶è¿”å›å…¶å®ä¾‹çš„æ–¹æ³•ï¼Œã€Œæ¬ºéª—äº†ã€æµè§ˆå™¨ã€‚å½“ç„¶è¿™æ ·çš„åšæ³•æ¯”è¾ƒå–å·§ï¼Œå…¶å‰¯ä½œç”¨æ˜¯æ›´æ”¹äº†åŸå‹å…³ç³»ï¼Œè¿™æ ·ä¹Ÿä¼šå¹²æ‰°æµè§ˆå™¨æŸäº›ä¼˜åŒ–æ“ä½œã€‚</p> <p><strong>ES6</strong></p> <div class="language- extra-class"><pre><code>class DateConstructor extends Date {
   constructor() {
       super()
       this.foo ='bar'
   }
   getMyTime() {
       return this.getTime()
   }
}

let date = new DateConstructor()

// ä¸Šé¢çš„æ–¹æ³•å¯ä»¥å®Œç¾æ‰§è¡Œï¼š

date.getMyTime()
// 1558921640586
</code></pre></div><h3 id="async-await"><a href="#async-await" class="header-anchor">#</a> async await</h3> <div class="language- extra-class"><pre><code>async function findPosts() {
  var response = await $.get('/posts');
  try{
     return JSON.parse(response.posts)
  } catch(e) {
     throw new Error(&quot;failed&quot;)
  }
}
</code></pre></div><p>to</p> <div class="language- extra-class"><pre><code>function findPosts() {
    var ctx = this, args = arguments;
    return Promise.resolve().then(function () {
        var response;
        return $.get('/posts').then(function (value) {
            response = value;
            return Promise.resolve().then(function () {
                return JSON.parse(response.posts);
            }).catch(function (e) {
                throw new Error('failed');
            }).then(function () {
            });
        });
    });
}
</code></pre></div><h3 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="header-anchor">#</a> ç®­å¤´å‡½æ•°</h3> <p>æ²¡æœ‰è‡ªå·±çš„thisï¼Œargumentsï¼Œsuperæˆ–new.targetã€‚ç®­å¤´å‡½æ•°è¡¨è¾¾å¼æ›´é€‚ç”¨äºé‚£äº›æœ¬æ¥éœ€è¦åŒ¿åå‡½æ•°çš„åœ°æ–¹ï¼Œå¹¶ä¸”å®ƒä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚</p> <h3 id="ç±»æ•°ç»„è½¬æ•°ç»„"><a href="#ç±»æ•°ç»„è½¬æ•°ç»„" class="header-anchor">#</a> ç±»æ•°ç»„è½¬æ•°ç»„</h3> <p>Array.prototype.slice.call()</p> <div class="language- extra-class"><pre><code>var toArray = function(s){
	try{  
	   return Array.prototype.slice.call(s);  
	} catch(e){  
	  var arr = [];  
	  for(var i = 0,len = s.length; i &lt; len; i++){   
	       arr[i] = s[i];
		}
	}  
  return arr;  
}
</code></pre></div><p>Array.from()</p> <div class="language- extra-class"><pre><code>var args = Array.from(arguments);
</code></pre></div><p>æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰</p> <div class="language- extra-class"><pre><code>var args = [...arguments];
</code></pre></div><h3 id="çº¯å‡½æ•°"><a href="#çº¯å‡½æ•°" class="header-anchor">#</a> çº¯å‡½æ•°</h3> <ul><li>ç›¸åŒè¾“å…¥æ€»æ˜¯ä¼šè¿”å›ç›¸åŒçš„è¾“å‡ºã€‚</li> <li>ä¸äº§ç”Ÿå‰¯ä½œç”¨ã€‚</li> <li>ä¸ä¾èµ–äºå¤–éƒ¨çŠ¶æ€ã€‚</li></ul> <p>è°ƒç”¨ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä½†æ˜¯ä¸ä½¿ç”¨å…¶è¿”å›å€¼ï¼Œæ— æ„ä¹‰.</p> <h3 id="å‰¯ä½œç”¨"><a href="#å‰¯ä½œç”¨" class="header-anchor">#</a> <strong>å‰¯ä½œç”¨</strong></h3> <p>ä¿®æ”¹å…¨å±€å˜é‡ï¼ˆå‡½æ•°å¤–çš„å˜é‡ï¼‰ï¼Œä¿®æ”¹å‚æ•°æˆ–æ”¹å˜å¤–éƒ¨å­˜å‚¨</p> <h3 id="æŸ¯é‡ŒåŒ–"><a href="#æŸ¯é‡ŒåŒ–" class="header-anchor">#</a> æŸ¯é‡ŒåŒ–</h3> <div class="language- extra-class"><pre><code>function curry(fn, ...args) {
  return fn.length &lt;= args.length ? fn(...args) : function(...args1) {
    return curry(fn, ...args, ...args1)
  }
}

function plus(a, b, c) {
  return a + b + c
}

console.log(curry(plus)(1)(2)(3))
</code></pre></div><h3 id="åå‡½æ•°"><a href="#åå‡½æ•°" class="header-anchor">#</a> åå‡½æ•°</h3> <div class="language- extra-class"><pre><code>function partial (fn, ...args) {
	return fn.bind(null, ...args)
}
</code></pre></div><h3 id="proxy"><a href="#proxy" class="header-anchor">#</a> Proxy</h3> <p>æ”¯æŒ13ç§æ‹¦æˆªæ“ä½œ</p> <ul><li><strong>get(target, propKey, receiver)</strong>ï¼šæ‹¦æˆªå¯¹è±¡å±æ€§çš„è¯»å–ï¼Œæ¯”å¦‚<code>proxy.foo</code>å’Œ<code>proxy['foo']</code>ã€‚</li> <li><strong>set(target, propKey, value, receiver)</strong>ï¼šæ‹¦æˆªå¯¹è±¡å±æ€§çš„è®¾ç½®ï¼Œæ¯”å¦‚<code>proxy.foo = v</code>æˆ–<code>proxy['foo'] = v</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li> <li><strong>has(target, propKey)</strong>ï¼šæ‹¦æˆª<code>propKey in proxy</code>çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li> <li><strong>deleteProperty(target, propKey)</strong>ï¼šæ‹¦æˆª<code>delete proxy[propKey]</code>çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li> <li><strong>ownKeys(target)</strong>ï¼šæ‹¦æˆª<code>Object.getOwnPropertyNames(proxy)</code>ã€<code>Object.getOwnPropertySymbols(proxy)</code>ã€<code>Object.keys(proxy)</code>ã€<code>for...in</code>å¾ªç¯ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ç›®æ ‡å¯¹è±¡æ‰€æœ‰è‡ªèº«çš„å±æ€§çš„å±æ€§åï¼Œè€Œ<code>Object.keys()</code>çš„è¿”å›ç»“æœä»…åŒ…æ‹¬ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚</li> <li><strong>getOwnPropertyDescriptor(target, propKey)</strong>ï¼šæ‹¦æˆª<code>Object.getOwnPropertyDescriptor(proxy, propKey)</code>ï¼Œè¿”å›å±æ€§çš„æè¿°å¯¹è±¡ã€‚</li> <li><strong>defineProperty(target, propKey, propDesc)</strong>ï¼šæ‹¦æˆª<code>Object.defineProperty(proxy, propKey, propDescï¼‰</code>ã€<code>Object.defineProperties(proxy, propDescs)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li> <li><strong>preventExtensions(target)</strong>ï¼šæ‹¦æˆª<code>Object.preventExtensions(proxy)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li> <li><strong>getPrototypeOf(target)</strong>ï¼šæ‹¦æˆª<code>Object.getPrototypeOf(proxy)</code>ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚</li> <li><strong>isExtensible(target)</strong>ï¼šæ‹¦æˆª<code>Object.isExtensible(proxy)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li> <li><strong>setPrototypeOf(target, proto)</strong>ï¼šæ‹¦æˆª<code>Object.setPrototypeOf(proxy, proto)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å¦‚æœç›®æ ‡å¯¹è±¡æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸¤ç§é¢å¤–æ“ä½œå¯ä»¥æ‹¦æˆªã€‚</li> <li><strong>apply(target, object, args)</strong>ï¼šæ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºå‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚<code>proxy(...args)</code>ã€<code>proxy.call(object, ...args)</code>ã€<code>proxy.apply(...)</code>ã€‚</li> <li><strong>construct(target, args)</strong>ï¼šæ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚<code>new proxy(...args)</code>ã€‚</li></ul> <h3 id="globalthis"><a href="#globalthis" class="header-anchor">#</a> globalThis</h3> <p>åœ¨ Web ä¸­ï¼Œå¯ä»¥é€šè¿‡ windowã€self æˆ–è€… frames å–åˆ°å…¨å±€å¯¹è±¡ï¼Œä½†æ˜¯åœ¨ Web Workers ä¸­åªæœ‰ self å¯ä»¥ã€‚åœ¨ Node.js ä¸­ï¼Œå®ƒä»¬éƒ½æ— æ³•è·å–ï¼Œå¿…é¡»ä½¿ç”¨ globalã€‚åœ¨æ¾æ•£æ¨¡å¼ä¸‹ï¼Œå¯ä»¥åœ¨å‡½æ•°ä¸­è¿”å› this æ¥è·å–å…¨å±€å¯¹è±¡ï¼Œä½†æ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ this ä¼šè¿”å› undefined ã€‚</p> <h3 id="å•ä¾‹"><a href="#å•ä¾‹" class="header-anchor">#</a> å•ä¾‹</h3> <div class="language- extra-class"><pre><code>let obj = {}
// ä¹Ÿæ˜¯å•ä¾‹, å› ä¸ºåœ¨JavaScriptåˆ›å»ºå¯¹è±¡çš„æ–¹å¼ååˆ†çµæ´», 
// å¯ä»¥ç›´æ¥é€šè¿‡å¯¹è±¡å­—é¢é‡çš„æ–¹å¼å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡, 
// è€Œå…¶ä»–é¢å‘å¯¹è±¡çš„è¯­è¨€å¿…é¡»ä½¿ç”¨ç±»è¿›è¡Œå®ä¾‹åŒ–

class SingletonApple {
  constructor(name, creator, products) {
    //é¦–æ¬¡ä½¿ç”¨æ„é€ å™¨å®ä¾‹
    if (!SingletonApple.instance) {
      this.name = name;
      this.creator = creator;
      this.products = products;
      //å°†thisæŒ‚è½½åˆ°SingletonAppleè¿™ä¸ªç±»çš„instanceå±æ€§ä¸Š
      SingletonApple.instance = this;
    }
    return SingletonApple.instance;
  }
}
</code></pre></div><h3 id="è£…é¥°å™¨"><a href="#è£…é¥°å™¨" class="header-anchor">#</a> è£…é¥°å™¨</h3> <p>Object.assign</p> <div class="language- extra-class"><pre><code>class Math {
  @log
  add(a, b) {
    return a + b;
  }
}

function log(target, name, descriptor) {
  var oldValue = descriptor.value;

  descriptor.value = function() {
    console.log(`Calling ${name} with`, arguments);
    return oldValue.apply(this, arguments);
  };

  return descriptor;
}

const math = new Math();

// passed parameters should get logged now
math.add(2, 4);
</code></pre></div><h3 id="_0-1-0-2-â‰ -0-3"><a href="#_0-1-0-2-â‰ -0-3" class="header-anchor">#</a> 0.1+0.2 â‰  0.3</h3> <p>64ä½æ¯”ç‰¹åˆå¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p> <ul><li>ç¬¦å·ä½Sï¼šç¬¬ 1 ä½æ˜¯æ­£è´Ÿæ•°ç¬¦å·ä½ï¼ˆsignï¼‰ï¼Œ0ä»£è¡¨æ­£æ•°ï¼Œ1ä»£è¡¨è´Ÿæ•°</li> <li>æŒ‡æ•°ä½Eï¼šä¸­é—´çš„ 11 ä½å­˜å‚¨æŒ‡æ•°ï¼ˆexponentï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºæ¬¡æ–¹æ•°</li> <li>å°¾æ•°ä½Mï¼šæœ€åçš„ 52 ä½æ˜¯å°¾æ•°ï¼ˆmantissaï¼‰ï¼Œè¶…å‡ºçš„éƒ¨åˆ†è‡ªåŠ¨è¿›ä¸€èˆé›¶</li></ul> <p><a href="https://user-gold-cdn.xitu.io/2018/3/8/16205c88ea806bac?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" target="_blank" rel="noopener noreferrer">https://user-gold-cdn.xitu.io/2018/3/8/16205c88ea806bac?imageView2/0/w/1280/h/960/format/webp/ignore-error/1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>åè¿›åˆ¶çš„0.1å’Œ0.2ä¼šè¢«è½¬æ¢æˆäºŒè¿›åˆ¶çš„ï¼Œä½†æ˜¯ç”±äºæµ®ç‚¹æ•°ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºæ—¶æ˜¯æ— ç©·çš„ï¼š</p> <div class="language- extra-class"><pre><code>0.1 -&gt; 0.0001 1001 1001 1001...(1100å¾ªç¯)
0.2 -&gt; 0.0011 0011 0011 0011...(0011å¾ªç¯)
</code></pre></div><p>IEEE 754 æ ‡å‡†çš„ 64 ä½åŒç²¾åº¦æµ®ç‚¹æ•°çš„å°æ•°éƒ¨åˆ†æœ€å¤šæ”¯æŒ53ä½äºŒè¿›åˆ¶ä½ï¼Œæ‰€ä»¥ä¸¤è€…ç›¸åŠ ä¹‹åå¾—åˆ°äºŒè¿›åˆ¶ä¸ºï¼š</p> <div class="language- extra-class"><pre><code>0.0100110011001100110011001100110011001100110011001100
</code></pre></div><p>å› æµ®ç‚¹æ•°å°æ•°ä½çš„é™åˆ¶è€Œæˆªæ–­çš„äºŒè¿›åˆ¶æ•°å­—ï¼Œå†è½¬æ¢ä¸ºåè¿›åˆ¶ï¼Œå°±æˆäº†0.30000000000000004ã€‚æ‰€ä»¥åœ¨è¿›è¡Œç®—æœ¯è®¡ç®—æ—¶ä¼šäº§ç”Ÿè¯¯å·®ã€‚</p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h3 active"><a href="#å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´é€šä¿¡çš„å‡ ç§æ–¹æ³•" title="å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´é€šä¿¡çš„å‡ ç§æ–¹æ³•">å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´é€šä¿¡çš„å‡ ç§æ–¹æ³•</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#åŸå‹" title="åŸå‹">åŸå‹</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#prototypeä½œç”¨" title="prototypeä½œç”¨">prototypeä½œç”¨</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#newçš„è¿‡ç¨‹" title="newçš„è¿‡ç¨‹">newçš„è¿‡ç¨‹</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#this" title="this">this</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#javascript-æ‰§è¡Œ" title="JavaScript æ‰§è¡Œ">JavaScript æ‰§è¡Œ</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#é—­åŒ…" title="é—­åŒ…">é—­åŒ…</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#å†…å­˜ç®¡ç†åŸºæœ¬æ¦‚å¿µ" title="å†…å­˜ç®¡ç†åŸºæœ¬æ¦‚å¿µ">å†…å­˜ç®¡ç†åŸºæœ¬æ¦‚å¿µ</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#bind" title="bind">bind</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#apply" title="apply">apply</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#reduce" title="reduce">reduce</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#javascript-ç±»å‹" title="JavaScript ç±»å‹">JavaScript ç±»å‹</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#è½¬æ¢" title="è½¬æ¢">è½¬æ¢</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#promise" title="Promise">Promise</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ç»§æ‰¿" title="ç»§æ‰¿">ç»§æ‰¿</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#async-await" title="async await">async await</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ç®­å¤´å‡½æ•°" title="ç®­å¤´å‡½æ•°">ç®­å¤´å‡½æ•°</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ç±»æ•°ç»„è½¬æ•°ç»„" title="ç±»æ•°ç»„è½¬æ•°ç»„">ç±»æ•°ç»„è½¬æ•°ç»„</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#çº¯å‡½æ•°" title="çº¯å‡½æ•°">çº¯å‡½æ•°</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#å‰¯ä½œç”¨" title="å‰¯ä½œç”¨">å‰¯ä½œç”¨</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#æŸ¯é‡ŒåŒ–" title="æŸ¯é‡ŒåŒ–">æŸ¯é‡ŒåŒ–</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#åå‡½æ•°" title="åå‡½æ•°">åå‡½æ•°</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#proxy" title="Proxy">Proxy</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#globalthis" title="globalThis">globalThis</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#å•ä¾‹" title="å•ä¾‹">å•ä¾‹</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#è£…é¥°å™¨" title="è£…é¥°å™¨">è£…é¥°å™¨</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_0-1-0-2-â‰ -0-3" title="0.1+0.2 â‰  0.3">0.1+0.2 â‰  0.3</a></div></div></div></div> <footer class="footer" data-v-582f9766><div class="footer-left-wrap" data-v-582f9766><ul class="contact" data-v-582f9766><li class="contact-item" data-v-582f9766><a href="https://github.com/Jimzjy" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-582f9766><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-582f9766><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-582f9766></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-582f9766><ul class="copyright" data-v-582f9766><li class="copyright-item" data-v-582f9766><a href="/blog/1970/01/01/js/.html" class="nav-link" data-v-582f9766>æ‘¸é±¼ä¸­ğŸŸ...</a></li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.58155b05.js" defer></script><script src="/blog/assets/js/6.efbb1a0e.js" defer></script><script src="/blog/assets/js/4.9413832c.js" defer></script><script src="/blog/assets/js/18.4ca73e2f.js" defer></script>
  </body>
</html>
