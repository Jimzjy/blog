(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{352:function(e,t,n){"use strict";n.r(t);var r=n(9),s=Object(r.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[t("h2",{attrs:{id:"ajax-promise封装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ajax-promise封装"}},[this._v("#")]),this._v(" Ajax Promise封装")]),this._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[this._v("function fetchRequest (param) {\n    const type = param.type || 'GET',\n    const url = param.url;\n    if (!url) {\n        new TypeError('param url must be set...')\n    }\n    return new Promise( (resolve, reject) => {\n        let xhr = new XMLHttpRequest();\n        xhr.open(type, url, true);\n        // 1. 监听状态\n        xhr.onreadystatechange = function () {\n            // 2. readyState = 4， status = 200 是请求成功的标识\n            if (xhr.readyState === 4) {\n                if (xhr.status === 200) {\n                    resolve(xhr.responseText, xhr);\n                } else {\n                    reject({\n                        code: xhr.status, \n                        message: xhr.response \n                    }, xhr);\n                }\n            }\n        }\n        xhr.send();\n    })\n}")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);