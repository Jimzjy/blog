(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{351:function(e,t,r){"use strict";r.r(t);var n=r(9),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"实现"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#实现"}},[e._v("#")]),e._v(" 实现")]),e._v(" "),r("h2",{attrs:{id:"ajax-promise封装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ajax-promise封装"}},[e._v("#")]),e._v(" Ajax Promise封装")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("function fetchRequest (param) {\n    const type = param.type || 'GET',\n    const url = param.url;\n    if (!url) {\n        new TypeError('param url must be set...')\n    }\n    return new Promise( (resolve, reject) => {\n        let xhr = new XMLHttpRequest();\n        xhr.open(type, url, true);\n        // 1. 监听状态\n        xhr.onreadystatechange = function () {\n            // 2. readyState = 4， status = 200 是请求成功的标识\n            if (xhr.readyState === 4) {\n                if (xhr.status === 200) {\n                    resolve(xhr.responseText, xhr);\n                } else {\n                    reject({\n                        code: xhr.status, \n                        message: xhr.response \n                    }, xhr);\n                }\n            }\n        }\n        xhr.send();\n    })\n}")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);